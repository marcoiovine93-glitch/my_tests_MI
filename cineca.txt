C4neleone3!

1: A58U-NW3W-62MZ
2: EQR1-L5Z5-95ZN
3: U83U-1LYZ-A5DZ
4: GUEG-BWB5-IRJF
5: STJ9-R4BH-E9U8
6: YFMQ-HJBU-SEHK
7: 7QIJ-JWTY-MIS7
8: 78QC-ZI4D-DUCT
9: 23IM-RXFJ-BHXK
10: 2TA9-GNPX-BUA5
11: YME3-R9NY-1GA2
12: G6IU-D1LG-72U9


cluster commands:
mpicxx  -std=c++17 src/main.cpp -Iinclude -o ring.x -I/leonardo/prod/spack/06/install/0.22/linux-rhel8-icelake/gcc-8.5.0/nvhpc-24.5-torlmnyzcexnrs6pq4cccabv7ehkv3xy/Linux_x86_64/24.5/cuda/include -L/leonardo/prod/spack/06/install/0.22/linux-rhel8-icelake/gcc-8.5.0/nvhpc-24.5-torlmnyzcexnrs6pq4cccabv7ehkv3xy/Linux_x86_64/24.5/cuda/lib64 -lnvToolsExt

module load hpcx-mpi/2.19

vim slurm-21867635.out //In this way we can check the output file generated by slurm and see of there are errors and failures!

module list : to see if the modules are properly loaded!!


JOB configuration:
#!/bin/bash
#SBATCH --job-name=newjob_ring
#SBATCH --time=00:05:00
#SBATCH --nodes=1 # Number of nodes
#SBATCH --ntasks-per-node=4
#SBATCH --time=00:05:00               # Time limit hrs:min:sec
#SBATCH -p dcgp_usr_prod #This is the right one to choose!!

here we put the line to run the executable

then we run the job with:
sbatch job_script.ssh


NSYS:
to make it work, we need to do:
ssh -X <username@cluster_address>
--> in this way the NSYS will be able to open and show the results!!



configure step: 
step ssh login '<user-email>' --provisioner cineca-hpc


How to copy from local to cluster:
scp -r ex8_ext_ring/ miovine0@login.leonardo.cineca.it:/leonardo/home/userexternal/miovine0


How to copy from cluster to local when we need to specify a Port for the Cluster:
scp -P 22002 root@marvin.elab.sissa.it:/etc/resolv.conf .



Exercise Jacobi with par (superscalar): (It is important to observe that we don't need to do the include of the header necessary for the profiling
because it seems already included in nvc++ configuratio (or we could add a #pragma once)
nvc++ -stdpar=multicore -std=c++17 src/main.cpp -Iinclude -o jacobi.x -I/leonardo/prod/spack/06/install/0.22/linux-rhel8-icelake/gcc-8.5.0/nvhpc-24.5-torlmnyzcexnrs6pq4cccabv7ehkv3xy/Linux_x86_64/24.5/cuda/include -L/leonardo/prod/spack/06/install/0.22/linux-rhel8-icelake/gcc-8.5.0/nvhpc-24.5-torlmnyzcexnrs6pq4cccabv7ehkv3xy/Linux_x86_64/24.5/cuda/lib64 -lnvToolsExt





GITHUB ON CLUSTER:
WARNING!!!!:
- once we connected Leonardo to github, it is necessary to do not only a git pull from the origin repo (not forked) but also of the mine
  (forked) repo, because this repo could have been changed by local machine pushes!!!! SO ATTENTION!!!


To compile the openblas and timings: 
mpicxx -I$OPENBLAS_INC -I./include -L$OPENBLAS_LIB -o matrix.x src/main.cpp -lopenblas



Francesco Andreucci e-mail:
fandreuc@sissa.it
